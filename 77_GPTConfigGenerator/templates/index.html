<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPTConfigGenerator - Day 77</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'ui-sans-serif', 'system-ui'],
                    },
                    colors: {
                        'primary': '#3B82F6',
                        'secondary': '#1E40AF',
                        'accent': '#F59E0B',
                        'success': '#10B981',
                        'error': '#EF4444',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'pulse-slow': 'pulse 2s infinite',
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .code-editor {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        .copy-flash {
            animation: flash 0.3s ease-in-out;
        }
        @keyframes flash {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(59, 130, 246, 0.1); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-primary">⚙️ GPTConfigGenerator</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="https://github.com/muhammadsami987123/100DaysOfAI-Agents" 
                       target="_blank" 
                       class="text-gray-600 hover:text-primary transition-colors">
                        #100DaysOfAI-Agents
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Input Section -->
            <div class="space-y-6">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Generate Configuration</h2>
                    
                    <form id="configForm" class="space-y-4">
                        <!-- User Request Input -->
                        <div>
                            <label for="userRequest" class="block text-sm font-medium text-gray-700 mb-2">
                                Describe your configuration needs
                            </label>
                            <textarea 
                                id="userRequest" 
                                name="userRequest" 
                                rows="4" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
                                placeholder="e.g., Create a JSON config for a Node.js Express app with port 3000 and MongoDB"
                                required
                            ></textarea>
                        </div>

                        <!-- Config Type Selection -->
                        <div>
                            <label for="configType" class="block text-sm font-medium text-gray-700 mb-2">
                                Configuration Type
                            </label>
                            <select 
                                id="configType" 
                                name="configType" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
                            >
                                <option value="auto">Auto-detect</option>
                                <option value="app_settings">Application Settings</option>
                                <option value="devops">DevOps & Deployment</option>
                                <option value="linting">Linting & Formatting</option>
                                <option value="build_tools">Build Tools</option>
                                <option value="package_managers">Package Managers</option>
                                <option value="database">Database Configuration</option>
                                <option value="custom">Custom Configuration</option>
                            </select>
                        </div>

                        <!-- Format Selection -->
                        <div>
                            <label for="format" class="block text-sm font-medium text-gray-700 mb-2">
                                Output Format
                            </label>
                            <select 
                                id="format" 
                                name="format" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
                            >
                                <option value="json">JSON</option>
                                <option value="yaml">YAML</option>
                                <option value="toml">TOML</option>
                                <option value="js">JavaScript</option>
                                <option value="ts">TypeScript</option>
                            </select>
                        </div>

                        <!-- Generate Button -->
                        <button 
                            type="submit" 
                            id="generateBtn"
                            class="w-full bg-primary hover:bg-secondary text-white font-medium py-2 px-4 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            <span id="btnText">Generate Configuration</span>
                            <span id="btnSpinner" class="hidden ml-2">
                                <svg class="animate-spin h-4 w-4 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            </span>
                        </button>
                    </form>
                </div>

                <!-- Examples Section -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Example Requests</h3>
                    <div class="space-y-3">
                        <button class="example-btn w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors" data-example="Create a docker-compose.yml file with PostgreSQL and Redis services">
                            <div class="font-medium text-gray-900">Docker Compose</div>
                            <div class="text-sm text-gray-600">PostgreSQL + Redis services</div>
                        </button>
                        <button class="example-btn w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors" data-example="Generate a .prettierrc JSON config using 2-space tabs, no semicolons">
                            <div class="font-medium text-gray-900">Prettier Configuration</div>
                            <div class="text-sm text-gray-600">2-space tabs, no semicolons</div>
                        </button>
                        <button class="example-btn w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors" data-example="Create a vite.config.js file with React and Tailwind CSS">
                            <div class="font-medium text-gray-900">Vite Configuration</div>
                            <div class="text-sm text-gray-600">React + Tailwind CSS setup</div>
                        </button>
                        <button class="example-btn w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors" data-example="Give me a GitHub Actions YAML that runs tests on push and pull request">
                            <div class="font-medium text-gray-900">GitHub Actions</div>
                            <div class="text-sm text-gray-600">Run tests on push/PR</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Output Section -->
            <div class="space-y-6">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-900">Generated Configuration</h2>
                        <div class="flex space-x-2">
                            <button id="copyBtn" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors text-sm">
                                Copy
                            </button>
                            <button id="downloadBtn" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors text-sm">
                                Download
                            </button>
                        </div>
                    </div>
                    
                    <div id="configOutput" class="hidden">
                        <div class="bg-gray-900 rounded-md p-4 overflow-x-auto">
                            <pre id="configContent" class="text-green-400 code-editor text-sm whitespace-pre-wrap"></pre>
                        </div>
                    </div>
                    
                    <div id="placeholderOutput" class="text-center py-12 text-gray-500">
                        <div class="text-4xl mb-4">⚙️</div>
                        <p>Generated configuration will appear here</p>
                    </div>
                </div>

                <!-- Explanation Section -->
                <div id="explanationSection" class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 hidden">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Configuration Explanation</h3>
                    <div id="explanationContent" class="text-gray-700 leading-relaxed"></div>
                </div>

                <!-- Error Section -->
                <div id="errorSection" class="bg-red-50 border border-red-200 rounded-lg p-4 hidden">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-red-800">Error</h3>
                            <div id="errorMessage" class="mt-1 text-sm text-red-700"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg transform translate-x-full transition-transform duration-300 z-50">
        <div class="flex items-center">
            <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span id="toastMessage">Configuration copied to clipboard!</span>
        </div>
    </div>

    <script>
        // DOM Elements
        const form = document.getElementById('configForm');
        const generateBtn = document.getElementById('generateBtn');
        const btnText = document.getElementById('btnText');
        const btnSpinner = document.getElementById('btnSpinner');
        const configOutput = document.getElementById('configOutput');
        const placeholderOutput = document.getElementById('placeholderOutput');
        const configContent = document.getElementById('configContent');
        const explanationSection = document.getElementById('explanationSection');
        const explanationContent = document.getElementById('explanationContent');
        const errorSection = document.getElementById('errorSection');
        const errorMessage = document.getElementById('errorMessage');
        const copyBtn = document.getElementById('copyBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        const exampleBtns = document.querySelectorAll('.example-btn');

        // Event Listeners
        form.addEventListener('submit', handleFormSubmit);
        copyBtn.addEventListener('click', copyConfig);
        downloadBtn.addEventListener('click', downloadConfig);
        exampleBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const example = btn.dataset.example;
                document.getElementById('userRequest').value = example;
            });
        });

        // Form Submission
        async function handleFormSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const requestData = {
                user_request: formData.get('userRequest'),
                config_type: formData.get('configType'),
                format: formData.get('format')
            };

            // Show loading state
            setLoadingState(true);
            hideAllSections();

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                const result = await response.json();

                if (result.success) {
                    displayConfig(result.config_content);
                    await explainConfig(result.config_content, requestData.format);
                } else {
                    showError(result.error || 'Failed to generate configuration');
                }
            } catch (error) {
                showError('Network error: ' + error.message);
            } finally {
                setLoadingState(false);
            }
        }

        // Display Configuration
        function displayConfig(content) {
            configContent.textContent = content;
            configOutput.classList.remove('hidden');
            placeholderOutput.classList.add('hidden');
            
            // Add copy flash effect
            configOutput.classList.add('copy-flash');
            setTimeout(() => configOutput.classList.remove('copy-flash'), 300);
        }

        // Explain Configuration
        async function explainConfig(content, format) {
            try {
                const response = await fetch('/api/explain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        config_content: content,
                        format: format
                    })
                });

                const result = await response.json();
                if (result.success) {
                    explanationContent.textContent = result.explanation;
                    explanationSection.classList.remove('hidden');
                }
            } catch (error) {
                console.error('Error explaining config:', error);
            }
        }

        // Copy Configuration
        async function copyConfig() {
            const content = configContent.textContent;
            try {
                await navigator.clipboard.writeText(content);
                showToast('Configuration copied to clipboard!');
            } catch (error) {
                showToast('Failed to copy configuration', 'error');
            }
        }

        // Download Configuration
        function downloadConfig() {
            const content = configContent.textContent;
            const format = document.getElementById('format').value;
            const filename = `config.${format}`;
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Configuration downloaded!');
        }

        // Utility Functions
        function setLoadingState(loading) {
            generateBtn.disabled = loading;
            if (loading) {
                btnText.textContent = 'Generating...';
                btnSpinner.classList.remove('hidden');
            } else {
                btnText.textContent = 'Generate Configuration';
                btnSpinner.classList.add('hidden');
            }
        }

        function hideAllSections() {
            configOutput.classList.add('hidden');
            placeholderOutput.classList.remove('hidden');
            explanationSection.classList.add('hidden');
            errorSection.classList.add('hidden');
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorSection.classList.remove('hidden');
        }

        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            toast.className = `fixed top-4 right-4 px-6 py-3 rounded-md shadow-lg transform translate-x-full transition-transform duration-300 z-50 ${
                type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
            }`;
            
            // Show toast
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);
            
            // Hide toast
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, 3000);
        }
    </script>
</body>
</html>
